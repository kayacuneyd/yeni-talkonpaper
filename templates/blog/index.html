{% extends "base.html" %}
{% set title = "Blog" %}
{% block content %}
  <div class="container mx-auto px-4 max-w-[1180px]">
    <!-- Header -->
    <div class="mb-10">
      <p class="text-xs uppercase tracking-widest font-extrabold text-success mb-2">Blog</p>
      <h1 class="text-4xl font-extrabold mb-3">Latest Updates & Insights</h1>
      <p class="text-lg text-base-content/70">
        News, tutorials, and insights about academic video dubbing and cross-border research visibility.
      </p>
    </div>

    <!-- Tag Filter -->
    {% if all_tags %}
    <div class="mb-8">
      <div class="flex flex-wrap gap-2">
        <a href="{{ url_for('blog.index') }}" class="badge {% if not current_tag %}bg-primary text-primary-content{% else %}badge-ghost{% endif %} badge-lg">
          All Posts
        </a>
        {% for tag in all_tags %}
          <a href="{{ url_for('blog.index', tag=tag) }}" class="badge {% if current_tag == tag %}bg-primary text-primary-content{% else %}badge-ghost{% endif %} badge-lg">
            {{ tag }}
          </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- Blog Posts Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for post in posts %}
      <article class="card bg-base-100 border border-base-300 shadow-card rounded-2xl overflow-hidden hover:shadow-lg transition-shadow">
        <div class="p-6">
          <div class="flex flex-wrap gap-1 mb-3">
            {% for tag in post.tags %}
              <span class="badge badge-sm bg-primary/10 text-primary border-primary/20">{{ tag }}</span>
            {% endfor %}
          </div>

          <h2 class="text-2xl font-extrabold mb-2">
            <a href="{{ url_for('blog.post', slug=post.slug) }}" class="link link-hover text-base-content">
              {{ post.title }}
            </a>
          </h2>

          <div class="text-sm text-base-content/60 mb-3">
            <span>{{ post.date.strftime('%B %d, %Y') }}</span>
            <span class="mx-2">·</span>
            <span>{{ post.author }}</span>
          </div>

          {% if post.summary %}
            <p class="text-base-content/80 mb-4">{{ post.summary }}</p>
          {% endif %}

          <a href="{{ url_for('blog.post', slug=post.slug) }}" class="btn btn-sm btn-outline normal-case">
            Read More →
          </a>
        </div>
      </article>
      {% else %}
      <div class="col-span-full">
        <div class="alert alert-info">
          <span>No blog posts found{% if current_tag %} with tag "{{ current_tag }}"{% endif %}.</span>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
